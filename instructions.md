ИНСТРУКЦИЯ ПО ИСПОЛЬЗОВАНИЮ RAG-БОТА

СОДЕРЖАНИЕ:
1. Введение
2. Инструкция для пользователей
3. Инструкция для администраторов
4. Технические детали и ограничения
5. Часто задаваемые вопросы
6. Устранение неполадок

ВВЕДЕНИЕ

RAG-бот - это интеллектуальный ассистент, который помогает пользователям получать ответы на вопросы на основе предварительно загруженных документов. Бот использует современные технологии искусственного интеллекта для поиска и генерации ответов.

Система построена на технологии RAG (Retrieval-Augmented Generation), которая сочетает в себе:
- Поиск релевантной информации в базе знаний
- Генерацию ответов с использованием языковой модели
- Учет контекста диалога для более точных ответов

ИНСТРУКЦИЯ ДЛЯ ПОЛЬЗОВАТЕЛЕЙ

НАЧАЛО РАБОТЫ:
1. Найдите бота в Telegram по имени
2. Нажмите кнопку "Start" или отправьте команду /start
3. Бот поприветствует вас и предложит начать задавать вопросы

ОСНОВНЫЕ КОМАНДЫ:
/start - Начать взаимодействие с ботом
/help - Показать список доступных команд
/clear - Очистить историю чата

КАК ЗАДАВАТЬ ВОПРОСЫ:
1. Просто напишите свой вопрос в чат
2. Бот обработает вопрос и найдет наиболее релевантную информацию
3. Ответ будет сгенерирован на основе найденной информации
4. Если ответ неполный или неточный, вы можете уточнить вопрос

ВАЖНЫЕ ЗАМЕЧАНИЯ:
- Бот отвечает только на основе загруженных в него документов
- Ответы генерируются автоматически, поэтому могут содержать неточности
- Для получения более точного ответа формулируйте вопросы максимально конкретно
- Если ответ вас не устраивает, попробуйте переформулировать вопрос
- Система учитывает контекст диалога, поэтому связанные вопросы могут получать более точные ответы
- Бот поддерживает историю диалога до 15 последних сообщений

ИНСТРУКЦИЯ ДЛЯ АДМИНИСТРАТОРОВ

НАЧАЛО РАБОТЫ:
1. Убедитесь, что у вас есть права администратора
2. Проверьте доступность всех необходимых команд через /help
3. Убедитесь, что все необходимые сервисы запущены и работают корректно
4. Проверьте подключение к базам данных и языковой модели

УПРАВЛЕНИЕ ДОКУМЕНТАМИ

ЗАГРУЗКА ДОКУМЕНТОВ:
1. Отправьте команду /upload
2. Бот попросит вас отправить документ
3. Поддерживаемые форматы: TXT, PDF, DOCX
4. После отправки файла:
   - Бот подтвердит получение файла
   - Файл будет обработан (это может занять до 20 минут и более, зависит от размера документа)
   - После обработки документ станет доступен для поиска
5. Процесс обработки включает:
   - Извлечение текста из документа
   - Разбиение на фрагменты (чанки)
   - Создание эмбеддингов с помощью модели sbert_large_nlu_ru
   - Сохранение в базу данных
   - Индексация в векторной базе данных

ПРОСМОТР ДОКУМЕНТОВ:
1. Отправьте команду /list_docs
2. Бот покажет список всех загруженных документов с информацией:
   - Имя файла
   - ID документа
   - Дата загрузки
   - Количество фрагментов
   - Статус обработки
3. Если документов много, список будет отправлен частями

УДАЛЕНИЕ ДОКУМЕНТОВ:
1. Отправьте команду /delete_doc [ID или имя файла]
2. Бот запросит подтверждение удаления
3. Подтвердите или отмените удаление
4. После удаления:
   - Документ удаляется из базы данных
   - Удаляются все связанные эмбеддинги
   - Очищается история запросов к документу

ТЕХНИЧЕСКИЕ ДЕТАЛИ И ОГРАНИЧЕНИЯ

СИСТЕМНЫЕ ТРЕБОВАНИЯ:
- Доступ к MongoDB для хранения документов
- Доступ к Qdrant для хранения эмбеддингов
- Доступ к API языковой модели Gemma-3-12b-it
- Минимальные требования к серверу: 4GB RAM, 2 CPU
- Python 3.11 или выше

ОГРАНИЧЕНИЯ СИСТЕМЫ:
- Максимальный размер файла: 20MB
- Максимальное количество токенов в контексте: 16000
- Минимальный порог релевантности: 0.6
- Максимальное количество результатов поиска: 20
- Максимальное количество сообщений в истории: 15
- Размер эмбеддинга: 1024 измерения
- Буфер для ответа: 4096 токенов
- Базовый размер промпта: 800 токенов

ФОРМАТЫ И КОДИРОВКИ:
- Поддерживаемые форматы: TXT, PDF, DOCX
- Рекомендуемая кодировка текста: UTF-8
- Для PDF и DOCX извлекается только текст
- Изображения и таблицы не обрабатываются
- Сложные форматирования могут быть потеряны

МОНИТОРИНГ И ОБСЛУЖИВАНИЕ:
1. Регулярно проверяйте список документов
2. Удаляйте устаревшие или неактуальные документы
3. Следите за качеством ответов
4. При необходимости обновляйте базу знаний
5. Контролируйте использование ресурсов
6. Проверяйте логи на наличие ошибок
7. Мониторьте метрики системы:
   - Время генерации ответов
   - Количество использованных токенов
   - Средняя релевантность ответов
   - Количество обработанных чанков

ЧАСТО ЗАДАВАЕМЫЕ ВОПРОСЫ

ДЛЯ ПОЛЬЗОВАТЕЛЕЙ:
В: Почему бот не отвечает на мой вопрос?
О: Возможно, в базе знаний нет информации по вашей теме. Попробуйте переформулировать вопрос.

В: Как очистить историю разговора?
О: Используйте команду /clear

В: Почему ответы иногда неточные?
О: Ответы генерируются автоматически на основе найденной информации. Для более точных ответов формулируйте вопросы конкретнее.

В: Как долго бот помнит контекст разговора?
О: Бот учитывает до 15 последних сообщений в диалоге.

ДЛЯ АДМИНИСТРАТОРОВ:
В: Сколько времени занимает обработка документа?
О: До 20 минут, зависит от размера и сложности документа. Большие документы могут обрабатываться дольше.

В: Можно ли загружать несколько документов одновременно?
О: Нет, документы нужно загружать по одному для обеспечения стабильности системы.

В: Как проверить, что документ успешно загружен?
О: Используйте команду /list_docs для просмотра списка документов.

В: Что делать, если загрузка документа не завершается?
О: Проверьте логи системы, убедитесь, что все сервисы работают корректно. При необходимости перезапустите систему.

В: Как увеличить точность ответов?
О: 1. Загружайте качественные, хорошо структурированные документы
   2. Регулярно обновляйте базу знаний
   3. Удаляйте устаревшую информацию
   4. Следите за качеством ответов и при необходимости корректируйте базу знаний

УСТРАНЕНИЕ НЕПОЛАДОК

1. Проблемы с загрузкой документов:
   - Проверьте формат файла (должен быть txt, pdf или docx)
   - Убедитесь, что размер файла не превышает 20MB
   - Проверьте подключение к MongoDB и Qdrant
   - Проверьте доступность API языковой модели

2. Проблемы с ответами:
   - Проверьте наличие документов в базе знаний
   - Убедитесь, что документы содержат релевантную информацию
   - Проверьте подключение к языковой модели
   - Проверьте логи на наличие ошибок

3. Проблемы с производительностью:
   - Проверьте использование ресурсов сервера
   - Убедитесь, что все сервисы работают корректно
   - Проверьте настройки таймаутов
   - При необходимости увеличьте ресурсы сервера

4. Проблемы с доступом:
   - Проверьте настройки прав доступа
   - Убедитесь, что все необходимые порты открыты
   - Проверьте настройки брандмауэра
   - Проверьте корректность токенов и ключей доступа 